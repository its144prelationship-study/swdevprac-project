@startuml Delete Single Company (DELETE)

header Delete Single Company Sequence Diagram
title "Delete Single Company (DELETE)"

participant "Client" as client
participant "<<javaScript>>\n:server" as server
participant "<<router>>\n:companies" as routerCompanies
participant "<<controllers>>\n:companies" as controllersCompanies
participant "<<model>>\n:Company" as modelCompanies
participant "<<model>>\n:Booking" as modelBookings
participant "<<model>>\n:Favorite" as modelFavorites
database "<<MongoDB>>\n:companies" as CompaniesDatabase
database "<<MongoDB>>\n:bookings" as BookingsDatabase
database "<<MongoDB>>\n:favorites" as FavoritesDatabase

client -> server ++:req.post('/companies/:company_id')
server -> routerCompanies ++:app.use("/companies", companies)
routerCompanies -> controllersCompanies ++:updateCompany(req, res, next)
controllersCompanies -> modelCompanies ++:findByIdAndDelete(req.params.companyId)
modelCompanies -> CompaniesDatabase ++: CompanySchema
CompaniesDatabase --> modelCompanies --: company
controllersCompanies <-- modelCompanies --: company
controllersCompanies -> modelBookings ++:deleteMany(req.params.companyId)
modelBookings -> BookingsDatabase ++: BookingSchema
BookingsDatabase --> modelBookings --: bookings
controllersCompanies <-- modelBookings --: bookings
controllersCompanies -> modelFavorites ++:deleteMany(req.params.companyId)
modelFavorites -> FavoritesDatabase ++: FavoriteSchema
FavoritesDatabase --> modelFavorites --: favorites
controllersCompanies <-- modelFavorites --: favorites
controllersCompanies -> client --: response

@enduml